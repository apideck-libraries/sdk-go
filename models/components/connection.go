// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package components

import (
	"errors"
	"fmt"
	"github.com/apideck-libraries/sdk-go/internal/utils"
)

// ConnectionStatus - Status of the connection.
type ConnectionStatus string

const (
	ConnectionStatusLive      ConnectionStatus = "live"
	ConnectionStatusUpcoming  ConnectionStatus = "upcoming"
	ConnectionStatusRequested ConnectionStatus = "requested"
)

func (e ConnectionStatus) ToPointer() *ConnectionStatus {
	return &e
}

// IsExact returns true if the value matches a known enum value, false otherwise.
func (e *ConnectionStatus) IsExact() bool {
	if e != nil {
		switch *e {
		case "live", "upcoming", "requested":
			return true
		}
	}
	return false
}

type Target string

const (
	TargetCustomFields Target = "custom_fields"
	TargetResource     Target = "resource"
)

func (e Target) ToPointer() *Target {
	return &e
}

// IsExact returns true if the value matches a known enum value, false otherwise.
func (e *Target) IsExact() bool {
	if e != nil {
		switch *e {
		case "custom_fields", "resource":
			return true
		}
	}
	return false
}

type Value5Type string

const (
	Value5TypeStr     Value5Type = "str"
	Value5TypeInteger Value5Type = "integer"
	Value5TypeNumber  Value5Type = "number"
)

type Value5 struct {
	Str     *string  `queryParam:"inline" union:"member"`
	Integer *int64   `queryParam:"inline" union:"member"`
	Number  *float64 `queryParam:"inline" union:"member"`

	Type Value5Type
}

func CreateValue5Str(str string) Value5 {
	typ := Value5TypeStr

	return Value5{
		Str:  &str,
		Type: typ,
	}
}

func CreateValue5Integer(integer int64) Value5 {
	typ := Value5TypeInteger

	return Value5{
		Integer: &integer,
		Type:    typ,
	}
}

func CreateValue5Number(number float64) Value5 {
	typ := Value5TypeNumber

	return Value5{
		Number: &number,
		Type:   typ,
	}
}

func (u *Value5) UnmarshalJSON(data []byte) error {

	var str string = ""
	if err := utils.UnmarshalJSON(data, &str, "", true, nil); err == nil {
		u.Str = &str
		u.Type = Value5TypeStr
		return nil
	}

	var integer int64 = int64(0)
	if err := utils.UnmarshalJSON(data, &integer, "", true, nil); err == nil {
		u.Integer = &integer
		u.Type = Value5TypeInteger
		return nil
	}

	var number float64 = float64(0)
	if err := utils.UnmarshalJSON(data, &number, "", true, nil); err == nil {
		u.Number = &number
		u.Type = Value5TypeNumber
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for Value5", string(data))
}

func (u Value5) MarshalJSON() ([]byte, error) {
	if u.Str != nil {
		return utils.MarshalJSON(u.Str, "", true)
	}

	if u.Integer != nil {
		return utils.MarshalJSON(u.Integer, "", true)
	}

	if u.Number != nil {
		return utils.MarshalJSON(u.Number, "", true)
	}

	return nil, errors.New("could not marshal union type Value5: all fields are null")
}

type ConnectionValueType string

const (
	ConnectionValueTypeStr           ConnectionValueType = "str"
	ConnectionValueTypeInteger       ConnectionValueType = "integer"
	ConnectionValueTypeNumber        ConnectionValueType = "number"
	ConnectionValueTypeBoolean       ConnectionValueType = "boolean"
	ConnectionValueTypeArrayOfValue5 ConnectionValueType = "arrayOfValue5"
)

type ConnectionValue struct {
	Str           *string  `queryParam:"inline" union:"member"`
	Integer       *int64   `queryParam:"inline" union:"member"`
	Number        *float64 `queryParam:"inline" union:"member"`
	Boolean       *bool    `queryParam:"inline" union:"member"`
	ArrayOfValue5 []Value5 `queryParam:"inline" union:"member"`

	Type ConnectionValueType
}

func CreateConnectionValueStr(str string) ConnectionValue {
	typ := ConnectionValueTypeStr

	return ConnectionValue{
		Str:  &str,
		Type: typ,
	}
}

func CreateConnectionValueInteger(integer int64) ConnectionValue {
	typ := ConnectionValueTypeInteger

	return ConnectionValue{
		Integer: &integer,
		Type:    typ,
	}
}

func CreateConnectionValueNumber(number float64) ConnectionValue {
	typ := ConnectionValueTypeNumber

	return ConnectionValue{
		Number: &number,
		Type:   typ,
	}
}

func CreateConnectionValueBoolean(boolean bool) ConnectionValue {
	typ := ConnectionValueTypeBoolean

	return ConnectionValue{
		Boolean: &boolean,
		Type:    typ,
	}
}

func CreateConnectionValueArrayOfValue5(arrayOfValue5 []Value5) ConnectionValue {
	typ := ConnectionValueTypeArrayOfValue5

	return ConnectionValue{
		ArrayOfValue5: arrayOfValue5,
		Type:          typ,
	}
}

func (u *ConnectionValue) UnmarshalJSON(data []byte) error {

	var str string = ""
	if err := utils.UnmarshalJSON(data, &str, "", true, nil); err == nil {
		u.Str = &str
		u.Type = ConnectionValueTypeStr
		return nil
	}

	var integer int64 = int64(0)
	if err := utils.UnmarshalJSON(data, &integer, "", true, nil); err == nil {
		u.Integer = &integer
		u.Type = ConnectionValueTypeInteger
		return nil
	}

	var number float64 = float64(0)
	if err := utils.UnmarshalJSON(data, &number, "", true, nil); err == nil {
		u.Number = &number
		u.Type = ConnectionValueTypeNumber
		return nil
	}

	var boolean bool = false
	if err := utils.UnmarshalJSON(data, &boolean, "", true, nil); err == nil {
		u.Boolean = &boolean
		u.Type = ConnectionValueTypeBoolean
		return nil
	}

	var arrayOfValue5 []Value5 = []Value5{}
	if err := utils.UnmarshalJSON(data, &arrayOfValue5, "", true, nil); err == nil {
		u.ArrayOfValue5 = arrayOfValue5
		u.Type = ConnectionValueTypeArrayOfValue5
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for ConnectionValue", string(data))
}

func (u ConnectionValue) MarshalJSON() ([]byte, error) {
	if u.Str != nil {
		return utils.MarshalJSON(u.Str, "", true)
	}

	if u.Integer != nil {
		return utils.MarshalJSON(u.Integer, "", true)
	}

	if u.Number != nil {
		return utils.MarshalJSON(u.Number, "", true)
	}

	if u.Boolean != nil {
		return utils.MarshalJSON(u.Boolean, "", true)
	}

	if u.ArrayOfValue5 != nil {
		return utils.MarshalJSON(u.ArrayOfValue5, "", true)
	}

	return nil, errors.New("could not marshal union type ConnectionValue: all fields are null")
}

type Defaults struct {
	Target  *Target           `json:"target,omitempty"`
	ID      *string           `json:"id,omitempty"`
	Options []FormFieldOption `json:"options,omitempty"`
	Value   *ConnectionValue  `json:"value,omitempty"`
}

func (d *Defaults) GetTarget() *Target {
	if d == nil {
		return nil
	}
	return d.Target
}

func (d *Defaults) GetID() *string {
	if d == nil {
		return nil
	}
	return d.ID
}

func (d *Defaults) GetOptions() []FormFieldOption {
	if d == nil {
		return nil
	}
	return d.Options
}

func (d *Defaults) GetValue() *ConnectionValue {
	if d == nil {
		return nil
	}
	return d.Value
}

type Configuration struct {
	Resource *string    `json:"resource,omitempty"`
	Defaults []Defaults `json:"defaults,omitempty"`
}

func (c *Configuration) GetResource() *string {
	if c == nil {
		return nil
	}
	return c.Resource
}

func (c *Configuration) GetDefaults() []Defaults {
	if c == nil {
		return nil
	}
	return c.Defaults
}

// Health - Operational health status of the connection
type Health string

const (
	HealthRevoked         Health = "revoked"
	HealthMissingSettings Health = "missing_settings"
	HealthNeedsConsent    Health = "needs_consent"
	HealthNeedsAuth       Health = "needs_auth"
	HealthPendingRefresh  Health = "pending_refresh"
	HealthOk              Health = "ok"
)

func (e Health) ToPointer() *Health {
	return &e
}

// IsExact returns true if the value matches a known enum value, false otherwise.
func (e *Health) IsExact() bool {
	if e != nil {
		switch *e {
		case "revoked", "missing_settings", "needs_consent", "needs_auth", "pending_refresh", "ok":
			return true
		}
	}
	return false
}

type Connection struct {
	// The unique identifier of the connection.
	ID *string `json:"id,omitempty"`
	// The ID of the service this connection belongs to.
	ServiceID *string `json:"service_id,omitempty"`
	// The name of the connection
	Name    *string `json:"name,omitempty"`
	TagLine *string `json:"tag_line,omitempty"`
	// The unified API category where the connection belongs to.
	UnifiedAPI *string `json:"unified_api,omitempty"`
	// [Connection state flow](#section/Connection-state)
	State *ConnectionState `json:"state,omitempty"`
	// The current state of the Integration.
	IntegrationState *IntegrationState `json:"integration_state,omitempty"`
	// Type of authorization used by the connector
	AuthType *AuthType `json:"auth_type,omitempty"`
	// OAuth grant type used by the connector. More info: https://oauth.net/2/grant-types
	OauthGrantType *OAuthGrantType `json:"oauth_grant_type,omitempty"`
	// Status of the connection.
	Status *ConnectionStatus `json:"status,omitempty"`
	// Whether the connection is enabled or not. You can enable or disable a connection using the Update Connection API.
	Enabled *bool `json:"enabled,omitempty"`
	// The website URL of the connection
	Website *string `json:"website,omitempty"`
	// A visual icon of the connection, that will be shown in the Vault
	Icon *string `json:"icon,omitempty"`
	// The logo of the connection, that will be shown in the Vault
	Logo *string `json:"logo,omitempty"`
	// The OAuth redirect URI. Redirect your users to this URI to let them authorize your app in the connector's UI. Before you can use this URI, you must add `redirect_uri` as a query parameter to the `authorize_url`. Be sure to URL encode the `redirect_uri` part. Your users will be redirected to this `redirect_uri` after they granted access to your app in the connector's UI.
	AuthorizeURL *string `json:"authorize_url,omitempty"`
	// The OAuth revoke URI. Redirect your users to this URI to revoke this connection. Before you can use this URI, you must add `redirect_uri` as a query parameter. Your users will be redirected to this `redirect_uri` after they granted access to your app in the connector's UI.
	RevokeURL *string `json:"revoke_url,omitempty"`
	// Connection settings. Values will persist to `form_fields` with corresponding id
	Settings map[string]any `json:"settings,omitempty"`
	// Attach your own consumer specific metadata
	Metadata map[string]any `json:"metadata,omitempty"`
	// The settings that are wanted to create a connection.
	FormFields              []FormField     `json:"form_fields,omitempty"`
	Configuration           []Configuration `json:"configuration,omitempty"`
	ConfigurableResources   []string        `json:"configurable_resources,omitempty"`
	ResourceSchemaSupport   []string        `json:"resource_schema_support,omitempty"`
	ResourceSettingsSupport []string        `json:"resource_settings_support,omitempty"`
	ValidationSupport       *bool           `json:"validation_support,omitempty"`
	SchemaSupport           *bool           `json:"schema_support,omitempty"`
	// List of settings that are required to be configured on integration before authorization can occur
	SettingsRequiredForAuthorization []string              `json:"settings_required_for_authorization,omitempty"`
	Subscriptions                    []WebhookSubscription `json:"subscriptions,omitempty"`
	// Whether the connector has a guide available in the developer docs or not (https://docs.apideck.com/connectors/{service_id}/docs/consumer+connection).
	HasGuide *bool `json:"has_guide,omitempty"`
	// List of custom mappings configured for this connection
	CustomMappings []CustomMapping `json:"custom_mappings,omitempty"`
	// The current consent state of the connection
	ConsentState *ConsentState `json:"consent_state,omitempty"`
	// Immutable array of consent records for compliance and audit purposes
	Consents              []ConsentRecord `json:"consents,omitempty"`
	LatestConsent         *ConsentRecord  `json:"latest_consent,omitempty"`
	ApplicationDataScopes *DataScopes     `json:"application_data_scopes,omitempty"`
	// Operational health status of the connection
	Health *Health `json:"health,omitempty"`
	// Unix timestamp in milliseconds when credentials will be deleted if token refresh continues to fail. A value of 0 indicates no active retention window (connection is healthy or not using OAuth token refresh).
	CredentialsExpireAt *float64 `json:"credentials_expire_at,omitempty"`
	// Unix timestamp in milliseconds of the last failed token refresh attempt. A value of 0 indicates no recent failures. This field is used internally to enforce cooldown periods between retry attempts.
	LastRefreshFailedAt *float64 `json:"last_refresh_failed_at,omitempty"`
	CreatedAt           *float64 `json:"created_at,omitempty"`
	UpdatedAt           *float64 `json:"updated_at,omitempty"`
}

func (c *Connection) GetID() *string {
	if c == nil {
		return nil
	}
	return c.ID
}

func (c *Connection) GetServiceID() *string {
	if c == nil {
		return nil
	}
	return c.ServiceID
}

func (c *Connection) GetName() *string {
	if c == nil {
		return nil
	}
	return c.Name
}

func (c *Connection) GetTagLine() *string {
	if c == nil {
		return nil
	}
	return c.TagLine
}

func (c *Connection) GetUnifiedAPI() *string {
	if c == nil {
		return nil
	}
	return c.UnifiedAPI
}

func (c *Connection) GetState() *ConnectionState {
	if c == nil {
		return nil
	}
	return c.State
}

func (c *Connection) GetIntegrationState() *IntegrationState {
	if c == nil {
		return nil
	}
	return c.IntegrationState
}

func (c *Connection) GetAuthType() *AuthType {
	if c == nil {
		return nil
	}
	return c.AuthType
}

func (c *Connection) GetOauthGrantType() *OAuthGrantType {
	if c == nil {
		return nil
	}
	return c.OauthGrantType
}

func (c *Connection) GetStatus() *ConnectionStatus {
	if c == nil {
		return nil
	}
	return c.Status
}

func (c *Connection) GetEnabled() *bool {
	if c == nil {
		return nil
	}
	return c.Enabled
}

func (c *Connection) GetWebsite() *string {
	if c == nil {
		return nil
	}
	return c.Website
}

func (c *Connection) GetIcon() *string {
	if c == nil {
		return nil
	}
	return c.Icon
}

func (c *Connection) GetLogo() *string {
	if c == nil {
		return nil
	}
	return c.Logo
}

func (c *Connection) GetAuthorizeURL() *string {
	if c == nil {
		return nil
	}
	return c.AuthorizeURL
}

func (c *Connection) GetRevokeURL() *string {
	if c == nil {
		return nil
	}
	return c.RevokeURL
}

func (c *Connection) GetSettings() map[string]any {
	if c == nil {
		return nil
	}
	return c.Settings
}

func (c *Connection) GetMetadata() map[string]any {
	if c == nil {
		return nil
	}
	return c.Metadata
}

func (c *Connection) GetFormFields() []FormField {
	if c == nil {
		return nil
	}
	return c.FormFields
}

func (c *Connection) GetConfiguration() []Configuration {
	if c == nil {
		return nil
	}
	return c.Configuration
}

func (c *Connection) GetConfigurableResources() []string {
	if c == nil {
		return nil
	}
	return c.ConfigurableResources
}

func (c *Connection) GetResourceSchemaSupport() []string {
	if c == nil {
		return nil
	}
	return c.ResourceSchemaSupport
}

func (c *Connection) GetResourceSettingsSupport() []string {
	if c == nil {
		return nil
	}
	return c.ResourceSettingsSupport
}

func (c *Connection) GetValidationSupport() *bool {
	if c == nil {
		return nil
	}
	return c.ValidationSupport
}

func (c *Connection) GetSchemaSupport() *bool {
	if c == nil {
		return nil
	}
	return c.SchemaSupport
}

func (c *Connection) GetSettingsRequiredForAuthorization() []string {
	if c == nil {
		return nil
	}
	return c.SettingsRequiredForAuthorization
}

func (c *Connection) GetSubscriptions() []WebhookSubscription {
	if c == nil {
		return nil
	}
	return c.Subscriptions
}

func (c *Connection) GetHasGuide() *bool {
	if c == nil {
		return nil
	}
	return c.HasGuide
}

func (c *Connection) GetCustomMappings() []CustomMapping {
	if c == nil {
		return nil
	}
	return c.CustomMappings
}

func (c *Connection) GetConsentState() *ConsentState {
	if c == nil {
		return nil
	}
	return c.ConsentState
}

func (c *Connection) GetConsents() []ConsentRecord {
	if c == nil {
		return nil
	}
	return c.Consents
}

func (c *Connection) GetLatestConsent() *ConsentRecord {
	if c == nil {
		return nil
	}
	return c.LatestConsent
}

func (c *Connection) GetApplicationDataScopes() *DataScopes {
	if c == nil {
		return nil
	}
	return c.ApplicationDataScopes
}

func (c *Connection) GetHealth() *Health {
	if c == nil {
		return nil
	}
	return c.Health
}

func (c *Connection) GetCredentialsExpireAt() *float64 {
	if c == nil {
		return nil
	}
	return c.CredentialsExpireAt
}

func (c *Connection) GetLastRefreshFailedAt() *float64 {
	if c == nil {
		return nil
	}
	return c.LastRefreshFailedAt
}

func (c *Connection) GetCreatedAt() *float64 {
	if c == nil {
		return nil
	}
	return c.CreatedAt
}

func (c *Connection) GetUpdatedAt() *float64 {
	if c == nil {
		return nil
	}
	return c.UpdatedAt
}

type ConnectionDefaults struct {
	ID      *string           `json:"id,omitempty"`
	Options []FormFieldOption `json:"options,omitempty"`
	Value   *ConnectionValue  `json:"value,omitempty"`
}

func (c *ConnectionDefaults) GetID() *string {
	if c == nil {
		return nil
	}
	return c.ID
}

func (c *ConnectionDefaults) GetOptions() []FormFieldOption {
	if c == nil {
		return nil
	}
	return c.Options
}

func (c *ConnectionDefaults) GetValue() *ConnectionValue {
	if c == nil {
		return nil
	}
	return c.Value
}

type ConnectionConfiguration struct {
	Resource *string              `json:"resource,omitempty"`
	Defaults []ConnectionDefaults `json:"defaults,omitempty"`
}

func (c *ConnectionConfiguration) GetResource() *string {
	if c == nil {
		return nil
	}
	return c.Resource
}

func (c *ConnectionConfiguration) GetDefaults() []ConnectionDefaults {
	if c == nil {
		return nil
	}
	return c.Defaults
}

type ConnectionInput struct {
	// Whether the connection is enabled or not. You can enable or disable a connection using the Update Connection API.
	Enabled *bool `json:"enabled,omitempty"`
	// Connection settings. Values will persist to `form_fields` with corresponding id
	Settings map[string]any `json:"settings,omitempty"`
	// Attach your own consumer specific metadata
	Metadata      map[string]any            `json:"metadata,omitempty"`
	Configuration []ConnectionConfiguration `json:"configuration,omitempty"`
	// List of custom mappings configured for this connection
	CustomMappings []CustomMappingInput `json:"custom_mappings,omitempty"`
	// The current consent state of the connection
	ConsentState          *ConsentState       `json:"consent_state,omitempty"`
	LatestConsent         *ConsentRecordInput `json:"latest_consent,omitempty"`
	ApplicationDataScopes *DataScopesInput    `json:"application_data_scopes,omitempty"`
}

func (c *ConnectionInput) GetEnabled() *bool {
	if c == nil {
		return nil
	}
	return c.Enabled
}

func (c *ConnectionInput) GetSettings() map[string]any {
	if c == nil {
		return nil
	}
	return c.Settings
}

func (c *ConnectionInput) GetMetadata() map[string]any {
	if c == nil {
		return nil
	}
	return c.Metadata
}

func (c *ConnectionInput) GetConfiguration() []ConnectionConfiguration {
	if c == nil {
		return nil
	}
	return c.Configuration
}

func (c *ConnectionInput) GetCustomMappings() []CustomMappingInput {
	if c == nil {
		return nil
	}
	return c.CustomMappings
}

func (c *ConnectionInput) GetConsentState() *ConsentState {
	if c == nil {
		return nil
	}
	return c.ConsentState
}

func (c *ConnectionInput) GetLatestConsent() *ConsentRecordInput {
	if c == nil {
		return nil
	}
	return c.LatestConsent
}

func (c *ConnectionInput) GetApplicationDataScopes() *DataScopesInput {
	if c == nil {
		return nil
	}
	return c.ApplicationDataScopes
}
